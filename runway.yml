python: 3.6
cuda: 10.2
entrypoint: python runway_model.py
spec:
  gpu: True
  cpu: False
build_steps:
  - apt-get update
  - apt-get install -y libboost-all-dev
  - apt-get install ffmpeg libsm6 libxext6 -y
  - apt -y install gcc-8 g++-8
  - update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-8 8
  - update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-8 8
  - pip install --ignore-installed runway-python opencv-python torch torchvision pyyaml==5.1 cmake
  # - python -m pip install --ignore-installed detectron2 -f https://dl.fbaipublicfiles.com/detectron2/wheels/cu102/torch1.7/index.html
  - python -m pip install -e .
  - pip install av
  # - mv /model/detectron2 /model/detectron22
  - cd projects/DensePose